<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- Apply the following rules to standard Plone pages -->
       <rules css:if-content="#visual-portal-wrapper">

        <theme href="index.html" />

        <!-- Replace title with Plone's page title  -->
        <replace css:theme="html head title" css:content="html head title" />

        <!-- Copy base tag from Plone -->
        <before css:theme-children="html head" css:content="html head base" />

        <!-- Copy link, style, meta tags from Plone head -->
        <after css:theme-children="html head"
               content="/html/head/link | /html/head/style | /html/head/meta" />

        <!-- merge classes from Plone body with theme body -->
        <merge attributes="class" css:theme="body" css:content="body" />

        <!-- Copy script tags from Plone head to end of body -->
        <after css:theme-children="html body" css:content="html head script" />

        <!-- Insert your own rules here -->
	   
	   <!--swap in portal-globalnav -->
         <!--replace css:content="#portal-globalnav li" css:theme-children="#top-bar-wrap > nav > section > ul.left" /-->
	    <!--overkill rule to replace the plain class on the menu li - unnecessary use of force, but fun! -->
		<!--replace css:theme="#name-icon" css:content="#portal-logo" /-->
	    <replace content="//li[contains(@class,'plain')]/@class">
	    <xsl:attribute name="class">
	    <xsl:if test='contains(current(),"plain")'>has-dropdown not-click</xsl:if>
	    </xsl:attribute>
	    </replace>
	    
	    <!--replace content="//ul[contains(@class,'submenu')]/@class">
	    <xsl:attribute name="class">
	    <xsl:if test='contains(current(),"submenu")'>dropdown</xsl:if>
	    </xsl:attribute>
	    </replace-->
	    <!--drop css:theme="li.title.back.js-generated" /-->
	    
	    <replace css:content="#portal-globalnav" css:theme="#top-bar-wrap > nav > section > ul" />
		<!-- News Happy Box -->
		<copy css:content="#portletwrapper-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f5765625265646f0a6e657773 > dl > dd.portletItem.odd" css:theme="#container-1 > div > div > div.content" />
		
		<!--  About Happy Box -->
		<copy css:content="#parent-fieldname-description" css:theme="#container-2 > div > div > div.content" />
		<before css:theme="#container-2 > div > div > div.bcontroller" css:content="#portletwrapper-706c6f6e652e6c656674636f6c756d6e0a636f6e746578740a2f5765625265646f2f66726f6e742d706167650a717569636b2d6661637473 > dl" />
		
		<!-- Events Happy Box -->
	    <copy css:content="#portletwrapper-706c6f6e652e7269676874636f6c756d6e0a636f6e746578740a2f5765625265646f0a6576656e7473 > dl > dd.portletItem.odd" css:theme="#container-3 > div > div > div.content" />
		
		
	    <!--This should have worked.  Fall back and figure it out -->
	    <!--xsl:template css:match="#portal-globalnav">
		    <xsl:copy>
	        	 <xsl:attribute name='class'>left</xsl:attribute>
		      <xsl:copy-of select="@*" />
			 	<xsl:apply-templates />
		     </xsl:copy>
	    </xsl:template-->
    </rules>
</rules>
