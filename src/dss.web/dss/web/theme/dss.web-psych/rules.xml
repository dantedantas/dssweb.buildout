<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- Apply the following rules to standard Plone pages -->
    <rules css:if-content="#visual-portal-wrapper">

        <theme href="index.html" />

        <!-- Replace title with Plone's page title  -->
        <replace css:theme="html head title" css:content="html head title" />

        <!-- Copy base tag from Plone -->
        <before css:theme-children="html head" css:content="html head base" />

        <!-- Copy link, style, meta tags from Plone head -->
        <after css:theme-children="html head"
               content="/html/head/link | /html/head/style | /html/head/meta" />

        <!-- merge classes from Plone body with theme body -->
        <merge attributes="class" css:theme="body" css:content="body" />

        <!-- Copy script tags from Plone head to end of body -->
        <after css:theme-children="html body" css:content="html head script" />

        <!-- Insert your own rules here -->
	   
	   <!--swap in portal-globalnav -->
         <!--replace css:content="#portal-globalnav li" css:theme-children="#top-bar-wrap > nav > section > ul.left" /-->
	    <!--overkill rule to replace the plain class on the menu li - unnecessary use of force, but fun! -->
	    <!--replace content="//li[contains(@class,'plain')]/@class">
	    <xsl:attribute name="class">
	    <xsl:if test='contains(current(),"plain")'>has-dropdown not-click</xsl:if>
	    </xsl:attribute>
	    </replace-->
	    <!--replace content="//ul[contains(@class,'submenu')]/@class">
	    <xsl:attribute name="class">
	    <xsl:if test='contains(current(),"submenu")'>dropdown</xsl:if>
	    </xsl:attribute>
	    </replace-->
	    <!--drop css:theme="li.title.back.js-generated" /-->
	    
	    <replace css:content="#portal-globalnav" css:theme="#top-bar-wrap > nav > section > ul" />
	    <!--This should have worked.  Fall back and figure it out -->
	    <!--xsl:template css:match="#portal-globalnav">
		    <xsl:copy>
	        	 <xsl:attribute name='class'>left</xsl:attribute>
		      <xsl:copy-of select="@*" />
			 	<xsl:apply-templates />
		     </xsl:copy>
	    </xsl:template-->
    </rules>
</rules>
